<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 What about drake? | The targets R Package User Manual</title>
  <meta name="description" content="In-depth discussion of the major functionality of targets." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 What about drake? | The targets R Package User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://books.ropensci.org/targets" />
  <meta property="og:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />
  <meta property="og:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="github-repo" content="ropensci-books/targets" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 What about drake? | The targets R Package User Manual" />
  
  <meta name="twitter:description" content="In-depth discussion of the major functionality of targets." />
  <meta name="twitter:image" content="https://books.ropensci.org/targets/man/figures/logo.png" />

<meta name="author" content="Will Landau" />
<meta name="author" content="Copyright Eli Lilly and Company" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="man/figures/apple-touch-icon.png" />
  <link rel="shortcut icon" href="man/figures/favicon.ico" type="image/x-icon" />
<link rel="prev" href="cloud.html"/>

<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150843595-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150843595-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The targets R Package User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pipeline-toolkits"><i class="fa fa-check"></i><b>1.2</b> Pipeline toolkits</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#the-targets-package"><i class="fa fa-check"></i><b>1.3</b> The <code>targets</code> package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-this-manual"><i class="fa fa-check"></i><b>1.4</b> About this manual</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#what-about-drake"><i class="fa fa-check"></i><b>1.5</b> What about <code>drake</code>?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="walkthrough.html"><a href="walkthrough.html"><i class="fa fa-check"></i><b>2</b> Walkthrough</a>
<ul>
<li class="chapter" data-level="2.1" data-path="walkthrough.html"><a href="walkthrough.html#about-this-minimal-example"><i class="fa fa-check"></i><b>2.1</b> About this minimal example</a></li>
<li class="chapter" data-level="2.2" data-path="walkthrough.html"><a href="walkthrough.html#file-structure"><i class="fa fa-check"></i><b>2.2</b> File structure</a></li>
<li class="chapter" data-level="2.3" data-path="walkthrough.html"><a href="walkthrough.html#inspect-the-pipeline"><i class="fa fa-check"></i><b>2.3</b> Inspect the pipeline</a></li>
<li class="chapter" data-level="2.4" data-path="walkthrough.html"><a href="walkthrough.html#run-the-pipeline"><i class="fa fa-check"></i><b>2.4</b> Run the pipeline</a></li>
<li class="chapter" data-level="2.5" data-path="walkthrough.html"><a href="walkthrough.html#changes"><i class="fa fa-check"></i><b>2.5</b> Changes</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="walkthrough.html"><a href="walkthrough.html#change-code"><i class="fa fa-check"></i><b>2.5.1</b> Change code</a></li>
<li class="chapter" data-level="2.5.2" data-path="walkthrough.html"><a href="walkthrough.html#change-data"><i class="fa fa-check"></i><b>2.5.2</b> Change data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="walkthrough.html"><a href="walkthrough.html#read-your-data"><i class="fa fa-check"></i><b>2.6</b> Read your data</a></li>
<li class="chapter" data-level="2.7" data-path="walkthrough.html"><a href="walkthrough.html#read-metadata"><i class="fa fa-check"></i><b>2.7</b> Read metadata</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>3</b> Debugging</a>
<ul>
<li class="chapter" data-level="3.1" data-path="debugging.html"><a href="debugging.html#error-messages"><i class="fa fa-check"></i><b>3.1</b> Error messages</a></li>
<li class="chapter" data-level="3.2" data-path="debugging.html"><a href="debugging.html#environment-browser"><i class="fa fa-check"></i><b>3.2</b> Environment browser</a></li>
<li class="chapter" data-level="3.3" data-path="debugging.html"><a href="debugging.html#the-debug-option"><i class="fa fa-check"></i><b>3.3</b> The debug option</a></li>
<li class="chapter" data-level="3.4" data-path="debugging.html"><a href="debugging.html#workspaces"><i class="fa fa-check"></i><b>3.4</b> Workspaces</a></li>
<li class="chapter" data-level="3.5" data-path="debugging.html"><a href="debugging.html#tradeoffs"><i class="fa fa-check"></i><b>3.5</b> Tradeoffs</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#problems-with-script-based-workflows"><i class="fa fa-check"></i><b>4.1</b> Problems with script-based workflows</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#functions-1"><i class="fa fa-check"></i><b>4.2</b> Functions</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>4.3</b> Writing functions</a></li>
<li class="chapter" data-level="4.4" data-path="functions.html"><a href="functions.html#functions-in-pipelines"><i class="fa fa-check"></i><b>4.4</b> Functions in pipelines</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="practices.html"><a href="practices.html"><i class="fa fa-check"></i><b>5</b> Best practices</a>
<ul>
<li class="chapter" data-level="5.1" data-path="practices.html"><a href="practices.html#how-to-define-good-targets"><i class="fa fa-check"></i><b>5.1</b> How to define good targets</a></li>
<li class="chapter" data-level="5.2" data-path="practices.html"><a href="practices.html#dependencies"><i class="fa fa-check"></i><b>5.2</b> Dependencies</a></li>
<li class="chapter" data-level="5.3" data-path="practices.html"><a href="practices.html#workflows-as-r-packages"><i class="fa fa-check"></i><b>5.3</b> Workflows as R packages</a></li>
<li class="chapter" data-level="5.4" data-path="practices.html"><a href="practices.html#working-with-tools-outside-r"><i class="fa fa-check"></i><b>5.4</b> Working with tools outside R</a></li>
<li class="chapter" data-level="5.5" data-path="practices.html"><a href="practices.html#monitoring-the-pipeline"><i class="fa fa-check"></i><b>5.5</b> Monitoring the pipeline</a></li>
<li class="chapter" data-level="5.6" data-path="practices.html"><a href="practices.html#performance"><i class="fa fa-check"></i><b>5.6</b> Performance</a></li>
<li class="chapter" data-level="5.7" data-path="practices.html"><a href="practices.html#cleaning-up"><i class="fa fa-check"></i><b>5.7</b> Cleaning up</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>6</b> External files and literate programming</a>
<ul>
<li class="chapter" data-level="6.1" data-path="files.html"><a href="files.html#internal-files"><i class="fa fa-check"></i><b>6.1</b> Internal files</a></li>
<li class="chapter" data-level="6.2" data-path="files.html"><a href="files.html#external-input-files"><i class="fa fa-check"></i><b>6.2</b> External input files</a></li>
<li class="chapter" data-level="6.3" data-path="files.html"><a href="files.html#external-output-files"><i class="fa fa-check"></i><b>6.3</b> External output files</a></li>
<li class="chapter" data-level="6.4" data-path="files.html"><a href="files.html#literate-programming"><i class="fa fa-check"></i><b>6.4</b> Literate programming</a></li>
<li class="chapter" data-level="6.5" data-path="files.html"><a href="files.html#parameterized-r-markdown"><i class="fa fa-check"></i><b>6.5</b> Parameterized R Markdown</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="files.html"><a href="files.html#single-parameter-set"><i class="fa fa-check"></i><b>6.5.1</b> Single parameter set</a></li>
<li class="chapter" data-level="6.5.2" data-path="files.html"><a href="files.html#multiple-parameter-sets"><i class="fa fa-check"></i><b>6.5.2</b> Multiple parameter sets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dynamic.html"><a href="dynamic.html"><i class="fa fa-check"></i><b>7</b> Dynamic branching</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dynamic.html"><a href="dynamic.html#branching"><i class="fa fa-check"></i><b>7.1</b> Branching</a></li>
<li class="chapter" data-level="7.2" data-path="dynamic.html"><a href="dynamic.html#about-dynamic-branching"><i class="fa fa-check"></i><b>7.2</b> About dynamic branching</a></li>
<li class="chapter" data-level="7.3" data-path="dynamic.html"><a href="dynamic.html#patterns"><i class="fa fa-check"></i><b>7.3</b> Patterns</a></li>
<li class="chapter" data-level="7.4" data-path="dynamic.html"><a href="dynamic.html#pattern-construction"><i class="fa fa-check"></i><b>7.4</b> Pattern construction</a></li>
<li class="chapter" data-level="7.5" data-path="dynamic.html"><a href="dynamic.html#branch-provenance"><i class="fa fa-check"></i><b>7.5</b> Branch provenance</a></li>
<li class="chapter" data-level="7.6" data-path="dynamic.html"><a href="dynamic.html#testing-patterns"><i class="fa fa-check"></i><b>7.6</b> Testing patterns</a></li>
<li class="chapter" data-level="7.7" data-path="dynamic.html"><a href="dynamic.html#branching-over-files"><i class="fa fa-check"></i><b>7.7</b> Branching over files</a></li>
<li class="chapter" data-level="7.8" data-path="dynamic.html"><a href="dynamic.html#branching-over-rows"><i class="fa fa-check"></i><b>7.8</b> Branching over rows</a></li>
<li class="chapter" data-level="7.9" data-path="dynamic.html"><a href="dynamic.html#iteration"><i class="fa fa-check"></i><b>7.9</b> Iteration</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="dynamic.html"><a href="dynamic.html#vector-iteration"><i class="fa fa-check"></i><b>7.9.1</b> Vector iteration</a></li>
<li class="chapter" data-level="7.9.2" data-path="dynamic.html"><a href="dynamic.html#list-iteration"><i class="fa fa-check"></i><b>7.9.2</b> List iteration</a></li>
<li class="chapter" data-level="7.9.3" data-path="dynamic.html"><a href="dynamic.html#group-iteration"><i class="fa fa-check"></i><b>7.9.3</b> Group iteration</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="dynamic.html"><a href="dynamic.html#batching"><i class="fa fa-check"></i><b>7.10</b> Batching</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="static.html"><a href="static.html"><i class="fa fa-check"></i><b>8</b> Static branching</a>
<ul>
<li class="chapter" data-level="8.1" data-path="static.html"><a href="static.html#branching-1"><i class="fa fa-check"></i><b>8.1</b> Branching</a></li>
<li class="chapter" data-level="8.2" data-path="static.html"><a href="static.html#when-to-use-static-branching"><i class="fa fa-check"></i><b>8.2</b> When to use static branching</a></li>
<li class="chapter" data-level="8.3" data-path="static.html"><a href="static.html#map"><i class="fa fa-check"></i><b>8.3</b> Map</a></li>
<li class="chapter" data-level="8.4" data-path="static.html"><a href="static.html#dynamic-within-static-branching"><i class="fa fa-check"></i><b>8.4</b> Dynamic-within-static branching</a></li>
<li class="chapter" data-level="8.5" data-path="static.html"><a href="static.html#combine"><i class="fa fa-check"></i><b>8.5</b> Combine</a></li>
<li class="chapter" data-level="8.6" data-path="static.html"><a href="static.html#metaprogramming"><i class="fa fa-check"></i><b>8.6</b> Metaprogramming</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>9</b> High-performance computing</a>
<ul>
<li class="chapter" data-level="9.1" data-path="hpc.html"><a href="hpc.html#clustermq"><i class="fa fa-check"></i><b>9.1</b> Clustermq</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="hpc.html"><a href="hpc.html#clustermq-installation"><i class="fa fa-check"></i><b>9.1.1</b> Clustermq installation</a></li>
<li class="chapter" data-level="9.1.2" data-path="hpc.html"><a href="hpc.html#clustermq-locally"><i class="fa fa-check"></i><b>9.1.2</b> Clustermq locally</a></li>
<li class="chapter" data-level="9.1.3" data-path="hpc.html"><a href="hpc.html#clustermq-remotely"><i class="fa fa-check"></i><b>9.1.3</b> Clustermq remotely</a></li>
<li class="chapter" data-level="9.1.4" data-path="hpc.html"><a href="hpc.html#clustermq-configuration"><i class="fa fa-check"></i><b>9.1.4</b> Clustermq configuration</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="hpc.html"><a href="hpc.html#future"><i class="fa fa-check"></i><b>9.2</b> Future</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="hpc.html"><a href="hpc.html#future-installation"><i class="fa fa-check"></i><b>9.2.1</b> Future installation</a></li>
<li class="chapter" data-level="9.2.2" data-path="hpc.html"><a href="hpc.html#future-locally"><i class="fa fa-check"></i><b>9.2.2</b> Future locally</a></li>
<li class="chapter" data-level="9.2.3" data-path="hpc.html"><a href="hpc.html#future-remotely"><i class="fa fa-check"></i><b>9.2.3</b> Future remotely</a></li>
<li class="chapter" data-level="9.2.4" data-path="hpc.html"><a href="hpc.html#future-configuration"><i class="fa fa-check"></i><b>9.2.4</b> Future configuration</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="hpc.html"><a href="hpc.html#advanced"><i class="fa fa-check"></i><b>9.3</b> Advanced</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cloud.html"><a href="cloud.html"><i class="fa fa-check"></i><b>10</b> Cloud integration</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cloud.html"><a href="cloud.html#compute"><i class="fa fa-check"></i><b>10.1</b> Compute</a></li>
<li class="chapter" data-level="10.2" data-path="cloud.html"><a href="cloud.html#storage"><i class="fa fa-check"></i><b>10.2</b> Storage</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="cloud.html"><a href="cloud.html#communicate-with-your-collaborators"><i class="fa fa-check"></i><b>10.2.1</b> Communicate with your collaborators</a></li>
<li class="chapter" data-level="10.2.2" data-path="cloud.html"><a href="cloud.html#get-started-with-the-amazon-s3-web-console"><i class="fa fa-check"></i><b>10.2.2</b> Get started with the Amazon S3 web console</a></li>
<li class="chapter" data-level="10.2.3" data-path="cloud.html"><a href="cloud.html#configure-your-local-machine"><i class="fa fa-check"></i><b>10.2.3</b> Configure your local machine</a></li>
<li class="chapter" data-level="10.2.4" data-path="cloud.html"><a href="cloud.html#create-s3-buckets"><i class="fa fa-check"></i><b>10.2.4</b> Create S3 buckets</a></li>
<li class="chapter" data-level="10.2.5" data-path="cloud.html"><a href="cloud.html#configure-the-pipeline"><i class="fa fa-check"></i><b>10.2.5</b> Configure the pipeline</a></li>
<li class="chapter" data-level="10.2.6" data-path="cloud.html"><a href="cloud.html#run-the-pipeline-1"><i class="fa fa-check"></i><b>10.2.6</b> Run the pipeline</a></li>
<li class="chapter" data-level="10.2.7" data-path="cloud.html"><a href="cloud.html#manage-the-data"><i class="fa fa-check"></i><b>10.2.7</b> Manage the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="drake.html"><a href="drake.html"><i class="fa fa-check"></i><b>11</b> What about <code>drake</code>?</a>
<ul>
<li class="chapter" data-level="11.1" data-path="drake.html"><a href="drake.html#why-is-drake-superseded"><i class="fa fa-check"></i><b>11.1</b> Why is <code>drake</code> superseded?</a></li>
<li class="chapter" data-level="11.2" data-path="drake.html"><a href="drake.html#transitioning-to-targets"><i class="fa fa-check"></i><b>11.2</b> Transitioning to <code>targets</code></a></li>
<li class="chapter" data-level="11.3" data-path="drake.html"><a href="drake.html#advantages-of-targets-over-drake"><i class="fa fa-check"></i><b>11.3</b> Advantages of <code>targets</code> over <code>drake</code></a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="drake.html"><a href="drake.html#better-guardrails-by-design"><i class="fa fa-check"></i><b>11.3.1</b> Better guardrails by design</a></li>
<li class="chapter" data-level="11.3.2" data-path="drake.html"><a href="drake.html#enhanced-debugging-support"><i class="fa fa-check"></i><b>11.3.2</b> Enhanced debugging support</a></li>
<li class="chapter" data-level="11.3.3" data-path="drake.html"><a href="drake.html#improved-tracking-of-package-functions"><i class="fa fa-check"></i><b>11.3.3</b> Improved tracking of package functions</a></li>
<li class="chapter" data-level="11.3.4" data-path="drake.html"><a href="drake.html#lighter-friendlier-data-management"><i class="fa fa-check"></i><b>11.3.4</b> Lighter, friendlier data management</a></li>
<li class="chapter" data-level="11.3.5" data-path="drake.html"><a href="drake.html#cloud-storage"><i class="fa fa-check"></i><b>11.3.5</b> Cloud storage</a></li>
<li class="chapter" data-level="11.3.6" data-path="drake.html"><a href="drake.html#show-status-of-functions-and-global-objects"><i class="fa fa-check"></i><b>11.3.6</b> Show status of functions and global objects</a></li>
<li class="chapter" data-level="11.3.7" data-path="drake.html"><a href="drake.html#dynamic-branching-with-dplyrgroup_by"><i class="fa fa-check"></i><b>11.3.7</b> Dynamic branching with <code>dplyr::group_by()</code></a></li>
<li class="chapter" data-level="11.3.8" data-path="drake.html"><a href="drake.html#composable-dynamic-branching"><i class="fa fa-check"></i><b>11.3.8</b> Composable dynamic branching</a></li>
<li class="chapter" data-level="11.3.9" data-path="drake.html"><a href="drake.html#improved-parallel-efficiency"><i class="fa fa-check"></i><b>11.3.9</b> Improved parallel efficiency</a></li>
<li class="chapter" data-level="11.3.10" data-path="drake.html"><a href="drake.html#metaprogramming-1"><i class="fa fa-check"></i><b>11.3.10</b> Metaprogramming</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The targets R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="drake" class="section level1" number="11">
<h1><span class="header-section-number">Chapter 11</span> What about <code>drake</code>?</h1>
<p><a href="https://www.tidyverse.org/lifecycle/#superseded"><img src="https://img.shields.io/badge/lifecycle-superseded-blue.svg" alt='superseded lifecycle'></a></p>
<p><a href="https://github.com/ropensci/targets"><code>targets</code></a> is the successor of <a href="https://github.com/ropensci/drake"><code>drake</code></a>, an older pipeline tool. <a href="https://github.com/ropensci/drake"><code>drake</code></a> is <a href="https://lifecycle.r-lib.org/articles/stages.html#superseded">superseded</a>, which means there are no plans for new features or discretionary enhancements, but basic maintenance and support will continue indefinitely. Existing projects that use <a href="https://github.com/ropensci/drake"><code>drake</code></a> can safely continue to use <a href="https://github.com/ropensci/drake"><code>drake</code></a>, and there is no need to retrofit <a href="https://github.com/ropensci/targets"><code>targets</code></a>. New projects should use <a href="https://github.com/ropensci/targets"><code>targets</code></a> because it is friendlier and more robust.</p>
<div id="why-is-drake-superseded" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Why is <code>drake</code> superseded?</h2>
<p>However, nearly four years of community feedback have exposed major user-side limitations regarding data management, collaboration, dynamic branching, and parallel efficiency. Unfortunately, these limitations are permanent. Solutions in <a href="https://github.com/ropensci/drake"><code>drake</code></a> itself would make the package incompatible with existing projects that use it, and the internal architecture is too copious, elaborate, and mature for such extreme refactoring. That is why <a href="https://github.com/ropensci/targets"><code>targets</code></a> was created. The <a href="https://github.com/ropensci/targets"><code>targets</code></a> package borrows from past learnings, user suggestions, discussions, complaints, success stories, and feature requests, and it improves the user experience in ways that will never be possible in <a href="https://github.com/ropensci/drake"><code>drake</code></a>.</p>
</div>
<div id="transitioning-to-targets" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Transitioning to <code>targets</code></h2>
<p>If you know <a href="https://github.com/ropensci/drake"><code>drake</code></a>, then you already almost know <code>targets</code>. The programming style is similar, and most functions in <code>targets</code> have counterparts in <a href="https://github.com/ropensci/drake"><code>drake</code></a>.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Functions in <code>drake</code></th>
<th>Counterparts in <code>targets</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/use_drake.html"><code>use_drake()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_script.html"><code>drake_script()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_script.html"><code>tar_script()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_plan.html"><code>drake_plan()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_manifest.html"><code>tar_manifest()</code></a>, <a href="https://docs.ropensci.org/tarchetypes/reference/tar_plan.html"><code>tarchetypes::tar_plan()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/target.html"><code>target()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_target_raw.html"><code>tar_target_raw()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_config.html"><code>drake_config()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/outdated.html"><code>outdated()</code></a>, <a href="https://docs.ropensci.org/drake/reference/r_make.html"><code>r_outdated()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_outdated.html"><code>tar_outdated()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/vis_drake_graph.html"><code>vis_drake_graph()</code></a>, <a href="https://docs.ropensci.org/drake/reference/r_make.html"><code>r_vis_drake_graph()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_visnetwork.html"><code>tar_visnetwork()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_glimpse.html"><code>tar_glimpse()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/drake_graph_info.html"><code>drake_graph_info()</code></a>, <a href="https://docs.ropensci.org/drake/reference/r_make.html"><code>r_drake_graph_info()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_network.html"><code>tar_network()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/make.html"><code>make()</code></a>, <a href="https://docs.ropensci.org/drake/reference/r_make.html"><code>r_make()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_make_clustermq.html"><code>tar_make_clustermq()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_make_future.html"><code>tar_make_future()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/readd.html"><code>loadd()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_load.html"><code>tar_load()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/readd.html"><code>readd()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_read.html"><code>tar_read()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/diagnose.html"><code>diagnose()</code></a>, <a href="https://docs.ropensci.org/drake/reference/build_times.html"><code>build_times()</code></a>, <a href="https://docs.ropensci.org/drake/reference/cached.html"><code>cached()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_cache_log.html"><code>drake_cache_log()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_meta.html"><code>tar_meta()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_progress.html"><code>drake_progress()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_running.html"><code>drake_running()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_done.html"><code>drake_done()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_failed.html"><code>drake_failed()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_cancelled.html"><code>drake_cancelled()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_progress.html"><code>tar_progress()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/clean.html"><code>clean()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_deduplicate.html"><code>tar_deduplicate()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_delete.html"><code>tar_delete()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_destroy.html"><code>tar_destroy()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_invalidate.html"><code>tar_invalidate()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_gc.html"><code>drake_gc()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_prune.html"><code>tar_prune()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/id_chr.html"><code>id_chr()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_name.html"><code>tar_name()</code></a>, <a href="https://docs.ropensci.org/targets/reference/tar_path.html"><code>tar_path()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/knitr_in.html"><code>knitr_in()</code></a></td>
<td><a href="https://docs.ropensci.org/tarchetypes/reference/tar_render.html"><code>tarchetypes::tar_render()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/cancel.html"><code>cancel()</code></a>, <a href="https://docs.ropensci.org/drake/reference/cancel_if.html"><code>cancel_if()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_cancel.html"><code>tar_cancel()</code></a></td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/trigger.html"><code>trigger()</code></a></td>
<td><a href="https://docs.ropensci.org/targets/reference/tar_cue.html"><code>tar_cue()</code></a></td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/drake_example.html"><code>drake_example()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_examples.html"><code>drake_example()</code></a>, <a href="https://docs.ropensci.org/drake/reference/load_mtcars_example.html"><code>load_mtcars_example()</code></a>, <a href="https://docs.ropensci.org/drake/reference/clean_mtcars_example.html"><code>clean_mtcars_example()</code></a></td>
<td>Unsupported. Example <code>targets</code> pipelines are in individual repositories <a href="https://docs.ropensci.org/targets/index.html#examples">linked from here</a>.</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_build.html"><code>drake_build()</code></a></td>
<td>Unsupported in <code>targets</code> to ensure coherence with dynamic branching.</td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/drake_debug.html"><code>drake_debug()</code></a></td>
<td><a href="https://books.ropensci.org/targets/practice.html#debugging">Read here</a> to learn about interactive debugging in <code>targets</code>.</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_history.html"><code>drake_history()</code></a>, <a href="https://docs.ropensci.org/drake/reference/recoverable.html"><code>recoverable()</code></a></td>
<td>Unsupported in <code>targets</code>. Instead of trying to manage history and data recovery directly, <a href="https://github.com/ropensci/targets"><code>targets</code></a> maintains a much lighter/friendlier data store to make it easier to use external data versioning tools instead.</td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/missed.html"><code>missed()</code></a>, <a href="https://docs.ropensci.org/drake/reference/tracked.html"><code>tracked()</code></a>, <a href="https://docs.ropensci.org/drake/reference/deps_code.html"><code>deps_code()</code></a>, <a href="https://docs.ropensci.org/drake/reference/deps_target.html"><code>deps_target()</code></a>, <a href="https://docs.ropensci.org/drake/reference/deps_knitr.html"><code>deps_knitr()</code></a>, <a href="https://docs.ropensci.org/drake/reference/deps_profile.html"><code>deps_profile()</code></a></td>
<td>Unsupported in <code>targets</code> because dependency detection is <a href="https://books.ropensci.org/targets/practice.html#dependencies">far easier to understand than in <code>drake</code></a>.</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_hpc_template_file.html"><code>drake_hpc_template_file()</code></a>, <a href="https://docs.ropensci.org/drake/reference/drake_hpc_template_files.html"><code>drake_hpc_template_files()</code></a></td>
<td>Deemed out of scope for <code>targets</code>.</td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/drake_cache.html"><code>drake_cache()</code></a>, <a href="https://docs.ropensci.org/drake/reference/new_cache.html"><code>new_cache()</code></a>, <a href="https://docs.ropensci.org/drake/reference/find_cache.html"><code>find_cache()</code></a>.</td>
<td>Unsupported because <a href="https://github.com/ropensci/targets"><code>targets</code></a> is far more strict and paternalistic about data/file management.</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/rescue_cache.html"><code>rescue_cache()</code></a>, <a href="https://docs.ropensci.org/drake/reference/which_clean.html"><code>which_clean()</code></a>, <a href="https://docs.ropensci.org/drake/reference/cached_planned.html"><code>cache_planned()</code></a>, <a href="https://docs.ropensci.org/drake/reference/cached_unplanned.html"><code>cache_unplanned()</code></a></td>
<td>Unsupported due to the simplified data management system and storage cleaning functions.</td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/drake_get_session_info.html"><code>drake_get_session_info()</code></a></td>
<td>Deemed superfluous and a potential bottleneck. Discarded for <code>targets</code>.</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/read_drake_seed.html"><code>read_drake_seed()</code></a></td>
<td>Superfluous because <code>targets</code> always uses the same global seed. <a href="https://docs.ropensci.org/targets/reference/tar_meta.html"><code>tar_meta()</code></a> shows all the target-level seeds.</td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/show_source.html"><code>show_source()</code></a></td>
<td>Deemed superfluous. Discarded in <code>targets</code> to conserve storage space in <code>_targets/meta/meta</code>.</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/drake/reference/drake_tempfile.html"><code>drake_tempfile()</code></a></td>
<td>Superfluous in <code>targets</code> because there is no special <code>disk.frame</code> storage format. (<a href="https://books.ropensci.org/targets/files.html#external-output-files">Dynamic file targets</a> are much better for managing <code>disk.frame</code>s.)</td>
</tr>
<tr class="odd">
<td><a href="https://docs.ropensci.org/drake/reference/file_store.html"><code>file_store()</code></a></td>
<td>Superfluous in <code>targets</code> because <a href="https://books.ropensci.org/targets/files.html">all files are dynamic files</a> and there is no longer a need to Base32-encode any file names.</td>
</tr>
</tbody>
</table>
<p>Likewise, many <code>make()</code> arguments have equivalent arguments elsewhere.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>Argument of <code>drake::make()</code></th>
<th>Counterparts in <code>targets</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>targets</code></td>
<td><code>names</code> in <a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a> etc.</td>
</tr>
<tr class="even">
<td><code>envir</code></td>
<td><code>envir</code> in <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>verbose</code></td>
<td><code>reporter</code> in <a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a> etc.</td>
</tr>
<tr class="even">
<td><code>parallelism</code></td>
<td>Choice of function: <a href="https://docs.ropensci.org/targets/reference/tar_make.html"><code>tar_make()</code></a> vs <a href="https://docs.ropensci.org/targets/reference/tar_make_clustermq.html"><code>tar_make_clustermq()</code></a> vs <a href="https://docs.ropensci.org/targets/reference/tar_make_future.html"><code>tar_make_future()</code></a></td>
</tr>
<tr class="odd">
<td><code>jobs</code></td>
<td><code>workers</code> in <a href="https://docs.ropensci.org/targets/reference/tar_make_clustermq.html"><code>tar_make_clustermq()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_make_future.html"><code>tar_make_future()</code></a></td>
</tr>
<tr class="even">
<td><code>packages</code></td>
<td><code>packages</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>lib_loc</code></td>
<td><code>library</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="even">
<td><code>trigger</code></td>
<td><code>cue</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>caching</code></td>
<td><code>storage</code> and <code>retrieval</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="even">
<td><code>keep_going</code></td>
<td><code>error</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>memory_strategy</code></td>
<td><code>memory</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="even">
<td><code>garbage_collection</code></td>
<td><code>garbage_collection</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>template</code></td>
<td><code>resources</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="even">
<td><code>curl_handles</code></td>
<td><code>handle</code> element of <code>resources</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>format</code></td>
<td><code>format</code> in <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
</tbody>
</table>
<p>In addition, many <a href="https://books.ropensci.org/drake/plans.html#special-columns">optional columns of <code>drake</code> plans</a> are expressed differently in <code>targets</code>.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><a href="https://books.ropensci.org/drake/plans.html#special-columns">Optional column of <code>drake</code> plans</a></th>
<th>Feature in <code>targets</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>format</code></td>
<td><code>format</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="even">
<td><code>dynamic</code></td>
<td><code>pattern</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>transform</code></td>
<td><a href="https://docs.ropensci.org/tarchetypes/reference/index.html#section-branching">static branching functions in <code>tarchetypes</code></a> such as <a href="https://docs.ropensci.org/tarchetypes/reference/tar_map.html"><code>tar_map()</code></a> and <a href="https://docs.ropensci.org/tarchetypes/reference/tar_combine.html"><code>tar_combine()</code></a></td>
</tr>
<tr class="even">
<td><code>trigger</code></td>
<td><code>cue</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>hpc</code></td>
<td><code>deployment</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="even">
<td><code>resources</code></td>
<td><code>resources</code> argument of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
<tr class="odd">
<td><code>caching</code></td>
<td><code>storage</code> and <code>retrieval</code> arguments of <a href="https://docs.ropensci.org/targets/reference/tar_target.html"><code>tar_target()</code></a> and <a href="https://docs.ropensci.org/targets/reference/tar_option_set.html"><code>tar_option_set()</code></a></td>
</tr>
</tbody>
</table>
</div>
<div id="advantages-of-targets-over-drake" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Advantages of <code>targets</code> over <code>drake</code></h2>
<div id="better-guardrails-by-design" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Better guardrails by design</h3>
<p><a href="https://github.com/ropensci/drake"><code>drake</code></a> leaves ample room for user-side mistakes, and some of these mistakes require extra awareness or advanced knowledge of R to consistently avoid. The example behaviors below are too systemic to solve and still preserve back-compatibility.</p>
<ol style="list-style-type: decimal">
<li>By default, <code>make()</code> looks for functions and global objects in the parent environment of the calling R session. Because the global environment is often old and stale in practical situations, which causes targets to become incorrectly invalidated. Users need to remember to restart the session before calling <code>make()</code>. The issue is <a href="https://github.com/ropensci/drake/issues/761">discussed here</a>, and the discussion led to functions like <code>r_make()</code> which always create a fresh session to do the work. However, <code>r_make()</code> is not a complete replacement for <code>make()</code>, and beginner users still run into the original problems.</li>
<li>Similar to the above, <code>make()</code> does not find the intended functions and global objects if it is called in a different environment. Edge cases like <a href="https://github.com/ropensci/drake/issues/874">this one</a> and <a href="https://github.com/ropensci/drake/issues/527">this one</a> continue to surprise users.</li>
<li><a href="https://github.com/ropensci/drake"><code>drake</code></a> is extremely flexible about the location of the <code>.drake/</code> cache. When a user calls <code>readd()</code>, <code>loadd()</code>, <code>make()</code>, and similar functions, <a href="https://github.com/ropensci/drake"><code>drake</code></a> searches up through the parent directories until it finds a <code>.drake/</code> folder. This flexibility seldom helps, and it creates uncertainty and inconsistency when it comes to initializing and accessing projects, especially if there are multiple projects with nested file systems.</li>
</ol>
<p>The <a href="https://github.com/ropensci/targets"><code>targets</code></a> package solves all these issues by design. Functions <code>tar_make()</code>, <code>tar_make_clustermq()</code>, and <code>tar_make_future()</code> all create fresh new R sessions by default. They all require a <code>_targets.R</code> configuration file in the project root (working directory of the <code>tar_make()</code> call) so that the functions, global objects, and settings are all populated in the exact same way each session, leading to less frustration, greater consistency, and greater reproducibility. In addition, the <code>_targets/</code> data store always lives in the project root.</p>
</div>
<div id="enhanced-debugging-support" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Enhanced debugging support</h3>
<p><a href="https://github.com/ropensci/targets"><code>targets</code></a> has enhanced debugging support. With the <code>workspaces</code> argument to <code>tar_option_set()</code>, users can locally recreate the conditions under which a target runs. This includes packages, global functions and objects, and the random number generator seed. Similarly, <code>tar_option_set(error = "workspace")</code> automatically saves debugging workspaces for targets that encounter errors. The <code>debug</code> option lets users enter an interactive debugger for a given target while the pipeline is running. And unlike <code>drake</code>, all debugging features are fully compatible with dynamic branching.</p>
</div>
<div id="improved-tracking-of-package-functions" class="section level3" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Improved tracking of package functions</h3>
<p>By default, <a href="https://github.com/ropensci/targets"><code>targets</code></a> ignores changes to functions inside external packages. However, if a workflow centers on a custom package with methodology under development, users can make <a href="https://github.com/ropensci/targets"><code>targets</code></a> automatically watch the packages functions for changes. Simply supply the names of the relevant packages to the <code>imports</code> argument of <code>tar_option_set()</code>. Unlike <a href="https://github.com/ropensci/drake"><code>drake</code></a>, <a href="https://github.com/ropensci/targets"><code>targets</code></a> can track multiple packages this way, and the internal mechanism is much safer.</p>
</div>
<div id="lighter-friendlier-data-management" class="section level3" number="11.3.4">
<h3><span class="header-section-number">11.3.4</span> Lighter, friendlier data management</h3>
<p><a href="https://github.com/ropensci/drake"><code>drake</code></a>s cache is an intricate file system in a hidden <code>.drake</code> folder. It contains multiple files for each target, and those names are not informative. (See the files in the <code>data/</code> folder in the diagram below.) Users often have trouble understanding how <a href="https://github.com/ropensci/drake"><code>drake</code></a> manages data, resolving problems when files are corrupted, placing the data under version control, collaborating with others on the same pipeline, and clearing out superfluous data when the cache grows large in storage.</p>
<pre><code>.drake/
 config/
 data/
 17bfcef645301416.rds
 21935c86f12692e2.rds
 37caf5df2892cfc4.rds
 ...
 drake/
 history/
 return/
 tmp/
 keys/ # A surprisingly large number of tiny text files live here.
 memoize/
 meta/
 objects/
 progress/
 recover/
 session/
 scratch/ # This folder should be temporary, but it gets egregiously large.</code></pre>
<p>The <a href="https://github.com/ropensci/targets"><code>targets</code></a> takes a friendlier, more transparent, less mysterious approach to data management. Its data store is a visible <code>_targets</code> folder, and it contains far fewer files: a spreadsheet of metadata, a spreadsheet of target progress, and one informatively named data file for each target. It is much easier to understand the data management process, identify and diagnose problems, place projects under version control, and avoid consuming unnecessary storage resources. Sketch:</p>
<pre><code>_targets/
 meta/
 meta
 process
 progress
 objects/
 target_name_1
 target_name_2
 target_name_3
 ...
 scratch/ # Deleted when the pipeline finishes.</code></pre>
</div>
<div id="cloud-storage" class="section level3" number="11.3.5">
<h3><span class="header-section-number">11.3.5</span> Cloud storage</h3>
<p>Thanks to the simplified data store and simplified internals, <a href="https://github.com/ropensci/targets"><code>targets</code></a> can automatically upload data to the Amazon S3 bucket of your choice. Simply configure <a href="https://github.com/cloudyr/aws.s3"><code>aws.s3</code></a>, create a bucket, and select one of the AWS-powered storage formats. Then, <a href="https://github.com/ropensci/targets"><code>targets</code></a> will automatically upload the return values to the cloud.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="drake.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb163-2"><a href="drake.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_option_set</span>(<span class="at">resources =</span> <span class="fu">list</span>(<span class="at">bucket =</span> <span class="st">&quot;my-bucket-name&quot;</span>))</span>
<span id="cb163-3"><a href="drake.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb163-4"><a href="drake.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(dataset, <span class="fu">get_large_dataset</span>(), <span class="at">format =</span> <span class="st">&quot;aws_fst_tbl&quot;</span>),</span>
<span id="cb163-5"><a href="drake.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(analysis, <span class="fu">analyze_dataset</span>(dataset), <span class="at">format =</span> <span class="st">&quot;aws_qs&quot;</span>)</span>
<span id="cb163-6"><a href="drake.html#cb163-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Data retrieval is still super easy.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="drake.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_read</span>(dataset)</span></code></pre></div>
</div>
<div id="show-status-of-functions-and-global-objects" class="section level3" number="11.3.6">
<h3><span class="header-section-number">11.3.6</span> Show status of functions and global objects</h3>
<p><a href="https://github.com/ropensci/drake"><code>drake</code></a> has several utilities that inform users which targets are up to date and which need to rerun. However, those utilities are limited by how <a href="https://github.com/ropensci/drake"><code>drake</code></a> manages functions and other global objects. Whenever <a href="https://github.com/ropensci/drake"><code>drake</code></a> inspects globals, it stores their values in its cache and loses track of their previous state from the last run of the pipeline. As a result, it has trouble informing users exactly why a given target is out of date. And because the system for tracking global objects is tightly coupled with the cache, this limitation is permanent.</p>
<p>In <a href="https://github.com/ropensci/targets"><code>targets</code></a>, the metadata management system only updates information on global objects when the pipeline actually runs. This makes it possible to understand which specific changes to your code could have invalided your targets. In large projects with long runtimes, this feature contributes significantly to reproducibility and peace of mind.</p>
<p><img src="man/figures/drake-graph.png" /></p>
</div>
<div id="dynamic-branching-with-dplyrgroup_by" class="section level3" number="11.3.7">
<h3><span class="header-section-number">11.3.7</span> Dynamic branching with <code>dplyr::group_by()</code></h3>
<p><a href="https://books.ropensci.org/drake/dynamic.html">Dynamic branching</a> was an architecturally difficult fit in <a href="https://github.com/ropensci/drake"><code>drake</code></a>, and it can only support one single (<a href="https://github.com/r-lib/vctrs"><code>vctrs</code></a>-based) method of slicing and aggregation for processing sub-targets. This limitation has frustrated members of the community, as discussed <a href="https://github.com/ropensci/drake/issues/1087">here</a> and <a href="https://github.com/ropensci/drake/issues/1170">here</a>.</p>
<p><a href="https://github.com/ropensci/targets"><code>targets</code></a>, on the other hand, is more flexible regarding slicing and aggregation. When it branches over an object, it can iterate over vectors, lists, and even data frames grouped with <code>dplyr::group_by()</code>. To branch over chunks of a data frame, our data frame target needs to have a special <code>tar_group</code> column. We can create this column in our targets return value with the <code>tar_group()</code> function.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="drake.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb165-2"><a href="drake.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb165-3"><a href="drake.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb165-4"><a href="drake.html#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="dv">6</span>),</span>
<span id="cb165-5"><a href="drake.html#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">rep</span>(letters[<span class="fu">seq_len</span>(<span class="dv">3</span>)], <span class="at">each =</span> <span class="dv">2</span>)</span>
<span id="cb165-6"><a href="drake.html#cb165-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb165-7"><a href="drake.html#cb165-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb165-8"><a href="drake.html#cb165-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_group</span>()</span></code></pre></div>
<p>Our actual target has the command above and <code>iteration = "group"</code>.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="drake.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_target</span>(</span>
<span id="cb166-2"><a href="drake.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  data,</span>
<span id="cb166-3"><a href="drake.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb166-4"><a href="drake.html#cb166-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">seq_len</span>(<span class="dv">6</span>),</span>
<span id="cb166-5"><a href="drake.html#cb166-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="fu">rep</span>(letters[<span class="fu">seq_len</span>(<span class="dv">3</span>)], <span class="at">each =</span> <span class="dv">2</span>)</span>
<span id="cb166-6"><a href="drake.html#cb166-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb166-7"><a href="drake.html#cb166-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span></span>
<span id="cb166-8"><a href="drake.html#cb166-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tar_group</span>(),</span>
<span id="cb166-9"><a href="drake.html#cb166-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">iteration =</span> <span class="st">&quot;group&quot;</span></span>
<span id="cb166-10"><a href="drake.html#cb166-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Now, any target that maps over <code>data</code> is going to define one branch for each group in the data frame. The following target creates three branches when run in a pipeline: one returning 3, one returning 7, and one returning 11.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="drake.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar_target</span>(</span>
<span id="cb167-2"><a href="drake.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  sums,</span>
<span id="cb167-3"><a href="drake.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(data<span class="sc">$</span>x),</span>
<span id="cb167-4"><a href="drake.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="fu">map</span>(data)</span>
<span id="cb167-5"><a href="drake.html#cb167-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="composable-dynamic-branching" class="section level3" number="11.3.8">
<h3><span class="header-section-number">11.3.8</span> Composable dynamic branching</h3>
<p>Because the design of <a href="https://github.com/ropensci/targets"><code>targets</code></a> is fundamentally dynamic, users can create complicated dynamic branching patterns that are never going to be possible in <code>drake</code>. Below, target <code>z</code> creates six branches, one for each combination of <code>w</code> and tuple (<code>x</code>, <code>y</code>). The pattern <code>cross(w, map(x, y))</code> is equivalent to <code>tidyr::crossing(w, tidyr::nesting(x, y))</code>.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="drake.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _targets.R</span></span>
<span id="cb168-2"><a href="drake.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(targets)</span>
<span id="cb168-3"><a href="drake.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb168-4"><a href="drake.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(w, <span class="fu">seq_len</span>(<span class="dv">2</span>)),</span>
<span id="cb168-5"><a href="drake.html#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(x, <span class="fu">head</span>(letters, <span class="dv">3</span>)),</span>
<span id="cb168-6"><a href="drake.html#cb168-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(y, <span class="fu">head</span>(LETTERS, <span class="dv">3</span>)),</span>
<span id="cb168-7"><a href="drake.html#cb168-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(</span>
<span id="cb168-8"><a href="drake.html#cb168-8" aria-hidden="true" tabindex="-1"></a>    z,</span>
<span id="cb168-9"><a href="drake.html#cb168-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">w =</span> w, <span class="at">x =</span> x, <span class="at">y =</span> y),</span>
<span id="cb168-10"><a href="drake.html#cb168-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">pattern =</span> <span class="fu">cross</span>(w, <span class="fu">map</span>(x, y))</span>
<span id="cb168-11"><a href="drake.html#cb168-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb168-12"><a href="drake.html#cb168-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Thanks to <a href="https://github.com/glep"><code>glep</code></a> and <a href="https://github.com/djbirke"><code>djbirke</code></a> on GitHub for the idea.</p>
</div>
<div id="improved-parallel-efficiency" class="section level3" number="11.3.9">
<h3><span class="header-section-number">11.3.9</span> Improved parallel efficiency</h3>
<p><a href="https://books.ropensci.org/drake/dynamic.html">Dynamic branching</a> in <a href="https://github.com/ropensci/drake"><code>drake</code></a> is staged. In other words, all the sub-targets of a dynamic target must complete before the pipeline moves on to downstream targets. The diagram below illustrates this behavior in a pipeline with a dynamic target B that maps over another dynamic target A. For thousands of dynamic sub-targets with highly variable runtimes, this behavior consumes unnecessary runtime and computing resources. And because <a href="https://github.com/ropensci/drake"><code>drake</code></a>s architecture was designed at a fundamental level for static branching only, this limitation is permanent.</p>
<p><img src="man/figures/drake-dynamic-drake.png" /></p>
<p>By contrast, the internal data structures in <a href="https://github.com/ropensci/targets"><code>targets</code></a> are dynamic by design, which allows for a dynamic branching model with more flexibility and parallel efficiency. Branches can always start as soon as their upstream dependencies complete, even if some of those upstream dependencies are branches. This behavior reduces runtime and reduces consumption of computing resources.</p>
<p><img src="man/figures/drake-dynamic-targets.png" /></p>
</div>
<div id="metaprogramming-1" class="section level3" number="11.3.10">
<h3><span class="header-section-number">11.3.10</span> Metaprogramming</h3>
<p>In <a href="https://github.com/ropensci/drake"><code>drake</code></a>, pipelines are defined with the <code>drake_plan()</code> function. <code>drake_plan()</code> supports an elaborate domain specific language that diffuses user-supplied R expressions. This makes it convenient to assign commands to targets in the vast majority of cases, but it also obstructs custom metaprogramming by users (<a href="https://github.com/ropensci/drake/issues/1251">example here</a>). Granted, it is possible to completely circumvent <code>drake_plan()</code> and create the whole data frame from scratch, but this is hardly ideal and seldom done in practice.</p>
<p>The <a href="https://github.com/ropensci/targets"><code>targets</code></a> package tries to make customization easier. Relative to <a href="https://github.com/ropensci/drake"><code>drake</code></a>, <a href="https://github.com/ropensci/targets"><code>targets</code></a> takes a decentralized approach to setting up pipelines, moving as much custom configuration as possible to the target level rather than the whole pipeline level. In addition, the <code>tar_target_raw()</code> function avoids non-standard evaluation while mirroring <code>tar_target()</code> in all other respects. All this makes it much easier to create <a href="https://books.ropensci.org/targets/static.html#metaprogram">custom metaprogrammed pipelines</a> and <a href="https://github.com/ropensci/tarchetypes">target archetypes</a> while avoiding an elaborate domain specific language for <a href="https://books.ropensci.org/drake/static.html">static branching</a>, which was extremely difficult to understand and error prone in <a href="https://github.com/ropensci/drake"><code>drake</code></a>. The <a href="https://wlandau.github.io/targetopia.html">R Targetopia</a> is an emerging ecosystem of workflow frameworks that take full advantage of this customization and democratize reproducible pipelines.</p>

</div>
</div>
</div>











<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cloud.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/targets/edit/main/drake.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/ropensci-books/targets/commits/main/drake.Rmd",
"text": "Chapter edit history"
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
